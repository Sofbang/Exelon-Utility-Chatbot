metadata:
  platformVersion: "1.0"
main: true
name: "COMEDUtilitybot"
context:
  variables:
    name: "string"
    identifier: "string"
    numberEntity: "NUMBER"
    accountTypeEntity: "AccountType"
    outageOptions: "OutageOptions"
    outageOptionVariable: "string"
    phoneNumber: "PHONE_NUMBER"
    phoneNumberEntity: "PHONE_NUMBER"
    checkBalance_accountNumber: "string"
    YesNoVariable: "YES_NO"
    accountNumber: "NUMBER"
    outageType: "string"
    outageTypeEntity: "OutageType"
    feedbackNumber: "FeedbackNumber"
    outageStatus: "string"
    selectionType: "string"
    outageStatusMessage: "string"
    setStatus: "string"
    selectedAccountType: "string"
    verifiedAddressResult: "string"
    addressResponse: "string"
    accountType: "AccountType"
    ifAddressExist: "string"
    addressFound: "string"
    accountNotFound: "string"
    setOutageReported: "string"
    choices: "string"
    accounts: "string"
    setAddress: "string"
    counter: "string"
    outageReportProgress: "string"
    anythingElseVariable: "string"
    errorInMultipleAddress: "string"
    reportOutageOrNot: "string"
    reportOutageVariable: "string"
    activeStatusResponse: "string"
    numberOfAccount: "string"
    accountsOptions: "string"
    allResult: "string"
    selectedAccountNumber: "string"
    newUserAccount: "string"
    selectedAccountOption: "string"
    moreThanThreeAccount: "string"
    maskedAddressFound: "string"
    selectAccountOrPhoneVariable: "string"
    unresolvedVariable: "string"
    isMultipleAddressOrNot: "string"
    addressNotCorrectCountVariable: "string"
    checkBalance_MaskedAddress: "string"
    checkBalance_AccountInfo: "string"
    addressResponseCount: "string"
    extraVariable: "string"
    noAddressFoundCount: "string"
    addressCorrectResponse: "string"
    servicesDown: "string"
    satisfiedRate: "string"
    selectedAccountNumberType: "string"
    setReportOutageReported: "string"
    accountNumberCountVariable: "string"
    noAddressFoundMessage: "string"
    multipleAddressCountVariable: "string"
    endFlag: "string"
    payBalanceVariable: "string"
    identifierCountVariable: "string"
    askOutageTypeCountVariable: "string"
    iResult: "nlpresult"
states:
  intent:
    component: "System.Intent"
    properties:
      variable: "iResult"
      confidenceThreshold: 0.4
    transitions:
      actions:
        StartBot: "resetStartBot"
        OutageStatus: "resetOutageStatus"
        ReportOutage: "resetAllReportOutageVariable"
        EndBot: "resetEnd"
        CheckBalance: "checkBalance"
        SentimentalBot: "sentimentalAnalysis"
        PayBalance: "resetPayBalanceVariable"
        unresolvedIntent: "checkUnresolvedCount"
        
  resetStartBot:
    component: "System.ResetVariables"
    properties:
      variableList: "user.askOutageTypeCountVariable,user.identifierCountVariable,user.multipleAddressCountVariable,outageOptionVariable,user.addressNotCorrectCountVariable,user.unresolvedVariable,user.selectAccountOrPhoneVariable,setStatus,identifier,phoneNumber,checkBalance_accountNumber,accountNumber,outageType,outageStatus,selectionType,outageStatusMessage,selectedAccountType,verifiedAddressResult,addressResponse,ifAddressExist,addressFound,setOutageReported,choices,accounts,setAddress,counter,outageReportProgress,anythingElseVariable,errorInMultipleAddress,reportOutageOrNot,reportOutageVariable,activeStatusResponse,numberOfAccount,accountsOptions,allResult,selectedAccountNumber,newUserAccount,selectedAccountOption,moreThanThreeAccount,maskedAddressFound,selectAccountOrPhoneVariable,unresolvedVariable,isMultipleAddressOrNot,addressNotCorrectCountVariable,checkBalance_MaskedAddress,checkBalance_AccountInfo,addressResponseCount,extraVariable,noAddressFoundCount,addressCorrectResponse,servicesDown,satisfiedRate,selectedAccountNumberType,setReportOutageReported,accountNumberCountVariable,noAddressFoundMessage,multipleAddressCountVariable,endFlag,identifierCountVariable,askOutageTypeCountVariable"
    transitions: {}
    
  startBot:
    component: "System.List"
    properties:
      options: "${outageOptions.type.enumValues}"
      prompt: "Hello, how may I help you today? You can Check Outage Status, Report\
        \ an Outage or Check Account Balance. Please pick one option."
      variable: "outageOptionVariable"
    transitions:
      next: "matchEntityForSwitchOutageOptions"
      
  matchEntityForSwitchOutageOptions:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "outageOptionVariable"
      variable: "outageOptions"
    transitions:
      actions:
        match: "switchOutageOptions"
        nomatch: "checkNumber"
        
  checkNumber:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "outageOptionVariable"
      variable: "numberEntity"
    transitions:
      actions:
        match: "checkUnresolvedCount"
        nomatch: "intent"
        
  switchOutageOptions:
    component: "System.Switch"
    properties:
      variable: "outageOptions"
      values:
      - "Check Outage Status"
      - "Report An Outage"
      - "Check Balance"
    transitions:
      actions:
        Check Outage Status: "resetOutageStatus"
        Report An Outage: "resetAllReportOutageVariable"
        Check Balance: "checkBalance"
          
        
        #--------------------------------------------------------Check Outage----------------------------------------------------------
        
     
  resetOutageStatus:
    component: "System.ResetVariables"
    properties:
      variableList: "user.askOutageTypeCountVariable,user.identifierCountVariable,user.multipleAddressCountVariable,outageOptionVariable,user.addressNotCorrectCountVariable,user.unresolvedVariable,user.selectAccountOrPhoneVariable,setStatus,identifier,phoneNumber,checkBalance_accountNumber,accountNumber,outageType,outageStatus,selectionType,outageStatusMessage,selectedAccountType,verifiedAddressResult,addressResponse,ifAddressExist,addressFound,setOutageReported,choices,accounts,setAddress,counter,outageReportProgress,anythingElseVariable,errorInMultipleAddress,reportOutageOrNot,reportOutageVariable,activeStatusResponse,numberOfAccount,accountsOptions,allResult,selectedAccountNumber,newUserAccount,selectedAccountOption,moreThanThreeAccount,maskedAddressFound,selectAccountOrPhoneVariable,unresolvedVariable,isMultipleAddressOrNot,addressNotCorrectCountVariable,checkBalance_MaskedAddress,checkBalance_AccountInfo,addressResponseCount,extraVariable,noAddressFoundCount,addressCorrectResponse,servicesDown,satisfiedRate,selectedAccountNumberType,setReportOutageReported,accountNumberCountVariable,noAddressFoundMessage,multipleAddressCountVariable,endFlag,identifierCountVariable,askOutageTypeCountVariable"
    transitions: {}
    
  setEndFlagVariableForCheckOutageStatus:
    component: "System.SetVariable"
    properties:
      variable: "endFlag"
      value: "1"
    transitions: {}
    
  outageStatus:
    component: "System.Text"
    properties:
      prompt: "Let's see what's going on with your service. What is the primary phone\
        \ number associated with your account?"
      variable: "phoneNumber"
      maxPrompts: 2
    transitions:
      next: "checkPhoneNumberSetOrNotForOutage"
      
  checkPhoneNumberSetOrNotForOutage:
    component: "System.ConditionEquals"
    properties:
      variable: "phoneNumber"
      value: null
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "printOutage"
        
  printOutage:
    component: "OutageStatus"
    properties:
      PhoneNumber: "${phoneNumber.value.completeNumber}"
      AccountNumber: "${accountNumber.value.number}"
    transitions:
      actions:
        setVariableValues: "addressFoundOrNot"
        
  addressFoundOrNot:
    component: "System.ConditionEquals"
    properties:
      variable: "addressFound"
      value: "yes"
    transitions:
      actions:
        equal: "checkAccountNumberType"
        notequal: "againResetVariables"
        
  checkAccountNumberType:
    component: "System.ConditionEquals"
    properties:
      variable: "numberOfAccount"
      value: "single"
    transitions:
      actions:
        equal: "isAddressCorrect"
        notequal: "checkNumberOfAccounts"
        
  checkNumberOfAccounts:
    component: "System.ConditionEquals"
    properties:
      variable: "moreThanThreeAccount"
      value: "true"
    transitions:
      actions:
        equal: "printMessageForMoreThanThreeAccounts"
        notequal: "setVariableForMultipleAddress"
        
  printMessageForMoreThanThreeAccounts:
    component: "System.Output"
    properties:
      text: "My records indicate that there are several addresses associated with\
        \ this account. Please call us at 1-800-EDISON-1 for further assistance."
    transitions:
      return: "printMessageForOverThreeAccounts"
      
  setVariableForMultipleAddress:
    component: "System.SetVariable"
    properties:
      variable: "isMultipleAddressOrNot"
      value: "true"
    transitions:
      next: "multipleAddressAccount"
      
  checkMultipleAddressCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.multipleAddressCountVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setMultipleAddressCountVariable"
        
  setMultipleAddressCountVariable:
    component: "System.SetVariable"
    properties:
      variable: "multipleAddressCountVariable"
      value: "1"
    transitions: {}
    
  copyMultipleAddressCountVariables:
    component: "System.CopyVariables"
    properties:
      from: "multipleAddressCountVariable"
      to: "user.multipleAddressCountVariable"
    transitions:
      next: "resetForMultipleAddressNotFound"
      
  resetForMultipleAddressNotFound:
    component: "System.ResetVariables"
    properties:
      variableList: "selectedAccountOption"
    transitions: {}
    
  multipleAddressAccount:
    component: "System.List"
    properties:
      options: "${accountsOptions.value}"
      prompt: "My records indicate that there are multiple addresses associated with\
        \ the phone number provided. Please select the correct address:"
      variable: "selectedAccountOption"
    transitions:
      next: "selectedAddressFromMultiple"
      
  selectedAddressFromMultiple:
    component: "OutageStatus"
    properties:
      PhoneNumber: ""
      AccountNumber: ""
      SelectedMaskedAddress: "${selectedAccountOption.value}"
      MultipleAccountInfo: "${allResult}"
    transitions:
      actions:
        setVariableValues: "checkAddressFoundForMultipleAddress"
        
  checkAddressFoundForMultipleAddress:
    component: "System.ConditionEquals"
    properties:
      variable: "errorInMultipleAddress"
      value: "true"
    transitions:
      actions:
        equal: "checkMultipleAddressCount"
        notequal: "checkStatusOrReportOutage"
        
  againResetVariables:
    component: "System.ResetVariables"
    properties:
      variableList: "phoneNumber,accountNumber,addressResponse,selectedAccountType,activeStatusResponse,addressFound"
    transitions: {}
    
  checkSelectAccountOrPhoneCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.selectAccountOrPhoneVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "accountNotFoundAtBackend"
        
  accountNotFoundAtBackend:
    component: "System.ConditionEquals"
    properties:
      variable: "accountNotFound"
      value: "true"
    transitions:
      actions:
        equal: "selectAccountOrPhone"
        notequal: "backendProblem"
        
  backendProblem:
    component: "System.Output"
    properties:
      text: "${noAddressFoundMessage}"
    transitions:
      return: "backendProblem"
      
  selectAccountOrPhone:
    component: "System.List"
    properties:
      options: "${accountTypeEntity.type.enumValues}"
      prompt: "I知 sorry, but I can't find an account associated with that phone number.Do\
        \ you have another phone number or the account number available?"
      variable: "selectedAccountType"
    transitions:
      next: "CheckSelectedAccountType"
      
  CheckSelectedAccountType:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "selectedAccountType"
      variable: "accountTypeEntity"
    transitions:
      actions:
        match: "setAccountOrPhoneVariable"
        nomatch: "intent"
        
  setAccountOrPhoneVariable:
    component: "System.SetVariable"
    properties:
      variable: "selectAccountOrPhoneVariable"
      value: "1"
    transitions: {}
    
  copyAccountOrPhoneVariables:
    component: "System.CopyVariables"
    properties:
      from: "selectAccountOrPhoneVariable"
      to: "user.selectAccountOrPhoneVariable"
    transitions:
      next: "resetSelectedAccountVariables"
      
  isAddressCorrect:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${setAddress.value}. Is this correct?"
      variable: "addressResponse"
    transitions:
      next: "matchEntity_CheckAddressResponse"
      
  matchEntity_CheckAddressResponse:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "addressResponse"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForAddressResponse"
        nomatch: "intent"
        
  setVariableForAddressResponse:
    component: "System.SetVariable"
    properties:
      variable: "addressResponse"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkAddressResponse"
      
  checkAddressResponse:
    component: "System.Switch"
    properties:
      variable: "addressResponse"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "checkStatusOrReportOutage"
        NO: "resetVariables"
        
  resetVariables:
    component: "System.ResetVariables"
    properties:
      variableList: "phoneNumber,accountNumber,selectedAccountType,numberOfAccount,outageOptionVariable,addressFound,numberOfAccount,addressResponse"
    transitions: {}
    
  checkAddressNotCorrectCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.addressNotCorrectCountVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setAddressNotCorrectCountVariable"
        
  setAddressNotCorrectCountVariable:
    component: "System.SetVariable"
    properties:
      variable: "addressNotCorrectCountVariable"
      value: "1"
    transitions: {}
    
  copyAddressNotCorrectUserVariables:
    component: "System.CopyVariables"
    properties:
      from: "addressNotCorrectCountVariable"
      to: "user.addressNotCorrectCountVariable"
    transitions:
      next: "addressNotCorrect"
      
  addressNotCorrect:
    component: "System.List"
    properties:
      options: "${accountTypeEntity.type.enumValues}"
      prompt: " I知 sorry. Can you please provide an alternate phone number or account\
        \ number?"
      variable: "selectedAccountNumberType"
    transitions:
      next: "CheckSelectedAccountNumberType"
      
  CheckSelectedAccountNumberType:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "selectedAccountNumberType"
      variable: "accountTypeEntity"
    transitions:
      actions:
        match: "selectedAccount"
        nomatch: "intent"
        
  resetSelectedAccountVariables:
    component: "System.ResetVariables"
    properties:
      variableList: "phoneNumber,accountNumber,addressResponse,addressFound"
    transitions: {}
    
  selectedAccount:
    component: "System.Switch"
    properties:
      variable: "accountTypeEntity"
      values:
      - "Phone Number"
      - "Account Number"
    transitions:
      actions:
        Phone Number: "linkedViaPhoneNumber"
        Account Number: "linkedViaAccountNumber"
        
  linkedViaPhoneNumber:
    component: "System.Text"
    properties:
      prompt: "Great, thank you. What is the primary phone number?"
      variable: "phoneNumber"
      maxPrompts: 2
    transitions:
      next: "againCheckPhoneNumberSetOrNotForOutage"
      
  againCheckPhoneNumberSetOrNotForOutage:
    component: "System.ConditionEquals"
    properties:
      variable: "phoneNumber"
      value: null
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "printOutage"
        
  linkedViaAccountNumber:
    component: "System.Text"
    properties:
      prompt: "Great, thank you. What is the account number?"
      variable: "accountNumber"
      maxPrompts: 2
    transitions:
      next: "againCheckAccountNumberSetOrNotForOutage"
      
  againCheckAccountNumberSetOrNotForOutage:
    component: "System.ConditionEquals"
    properties:
      variable: "accountNumber"
      value: null
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "printOutage"
        
  checkStatusOrReportOutage:
    component: "System.ConditionEquals"
    properties:
      variable: "reportOutageVariable"
      value: "true"
    transitions:
      actions:
        equal: "resetReportOutageVariables"
        notequal: "resetMultipleAddressVariable"
        
  resetMultipleAddressVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "activeStatusResponse,reportOutageOrNot,outageType"
    transitions: {}
    
  checkOutageStatus:
    component: "System.ConditionEquals"
    properties:
      variable: "setStatus"
      value: "ACTIVE"
    transitions:
      actions:
        equal: "activeOutageStatus"
        notequal: "checkReportedOutage"
        
  activeOutageStatus:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${setOutageReported.value} Is there anything else that I can help you\
        \ with?"
      variable: "activeStatusResponse"
    transitions:
      next: "CheckActiveStatusYesNo"
      
  CheckActiveStatusYesNo:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "activeStatusResponse"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForActiveStatusResponse"
        nomatch: "intent"
        
  setVariableForActiveStatusResponse:
    component: "System.SetVariable"
    properties:
      variable: "activeStatusResponse"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkActiveStatusResponse"
      
  checkActiveStatusResponse:
    component: "System.Switch"
    properties:
      variable: "activeStatusResponse"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "resetStartBot"
        NO: "resetEnd"
          
        
        #--------------------------------------------------------Report Outage----------------------------------------------------------
        
     
  resetAllReportOutageVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "user.askOutageTypeCountVariable,user.identifierCountVariable,user.multipleAddressCountVariable,outageOptionVariable,user.addressNotCorrectCountVariable,user.unresolvedVariable,user.selectAccountOrPhoneVariable,setStatus,identifier,phoneNumber,checkBalance_accountNumber,accountNumber,outageType,outageStatus,selectionType,outageStatusMessage,selectedAccountType,verifiedAddressResult,addressResponse,ifAddressExist,addressFound,setOutageReported,choices,accounts,setAddress,counter,outageReportProgress,anythingElseVariable,errorInMultipleAddress,reportOutageOrNot,reportOutageVariable,activeStatusResponse,numberOfAccount,accountsOptions,allResult,selectedAccountNumber,newUserAccount,selectedAccountOption,moreThanThreeAccount,maskedAddressFound,selectAccountOrPhoneVariable,unresolvedVariable,isMultipleAddressOrNot,addressNotCorrectCountVariable,checkBalance_MaskedAddress,checkBalance_AccountInfo,addressResponseCount,extraVariable,noAddressFoundCount,addressCorrectResponse,servicesDown,satisfiedRate,selectedAccountNumberType,setReportOutageReported,accountNumberCountVariable,noAddressFoundMessage,multipleAddressCountVariable,endFlag,identifierCountVariable,askOutageTypeCountVariable"
    transitions: {}
    
  setEndFlagVariableForReportOutage:
    component: "System.SetVariable"
    properties:
      variable: "endFlag"
      value: "1"
    transitions: {}
    
  reportOutage:
    component: "System.Text"
    properties:
      prompt: "What's the primary phone number associated with your account?"
      variable: "phoneNumber"
      maxPrompts: 2
    transitions:
      next: "checkPhoneNumberSetOrNotForReport"
      
  checkPhoneNumberSetOrNotForReport:
    component: "System.ConditionEquals"
    properties:
      variable: "phoneNumber"
      value: null
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setReportOutageVariable"
        
  setReportOutageVariable:
    component: "System.SetVariable"
    properties:
      variable: "reportOutageVariable"
      value: "true"
    transitions:
      next: "printOutage"
      
  checkReportedOutage:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${setOutageReported.value} Would you like to report an outage?"
      variable: "reportOutageOrNot"
    transitions:
      next: "CheckReportOutageOrNot"
      
  CheckReportOutageOrNot:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "reportOutageOrNot"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForReportOutageOrNot"
        nomatch: "intent"
        
  setVariableForReportOutageOrNot:
    component: "System.SetVariable"
    properties:
      variable: "reportOutageOrNot"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "selectResponseForReport"
      
  selectResponseForReport:
    component: "System.Switch"
    properties:
      variable: "reportOutageOrNot"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "askOutageType"
        NO: "resetEnd"
      
  checkAskOutageTypeCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.askOutageTypeCountVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setAskOutageTypeCountVariable"
        
  setAskOutageTypeCountVariable:
    component: "System.SetVariable"
    properties:
      variable: "askOutageTypeCountVariable"
      value: "1"
    transitions: {}
    
  copyAskOutageTypeCountVariable:
    component: "System.CopyVariables"
    properties:
      from: "askOutageTypeCountVariable"
      to: "user.askOutageTypeCountVariable"
    transitions:
      next: "resetAskOutageType" 
      
  resetAskOutageType:
    component: "System.ResetVariables"
    properties:
      variableList: "outageType,askOutageTypeCountVariable"
    transitions: {}    
        
  askOutageType:
    component: "System.List"
    properties:
      options: "${outageTypeEntity.type.enumValues}"
      prompt: "OK, let's get that reported. Is it a full outage or partial?"
      variable: "outageType"
    transitions:
      next: "checkSelectedOutageType_CheckOutage"
      
  checkSelectedOutageType_CheckOutage:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "outageType"
      variable: "outageTypeEntity"
    transitions:
      actions:
        match: "forMultipleOrSingle"
        nomatch: "checkAskOutageTypeCount"
      
  resetReportOutageVariables:
    component: "System.ResetVariables"
    properties:
      variableList: "reportOutageVariable,outageType,anythingElseVariable,activeStatusResponse,reportOutageOrNot"
    transitions: {}
    
  checkReportOutageStatus:
    component: "System.ConditionEquals"
    properties:
      variable: "setStatus"
      value: "ACTIVE"
    transitions:
      actions:
        equal: "activeReportOutageStatus"
        notequal: "reportReportedOutage"
        
  activeReportOutageStatus:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${setReportOutageReported.value} Would you like to report an outage?"
      variable: "activeStatusResponse"
    transitions:
      next: "checkReportActiveStatusResponse"
      
  reportReportedOutage:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${setOutageReported.value} Would you like to report an outage?"
      variable: "activeStatusResponse"
    transitions:
      next: "checkReportActiveStatusResponse"
      
  checkReportActiveStatusResponse:
    component: "System.ConditionEquals"
    properties:
      variable: "activeStatusResponse"
      value: "no"
    transitions:
      actions:
        equal: "resetEnd"
        notequal: "directReportOutage"
      
  checkReportOutageTypeCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.askOutageTypeCountVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setAskOutageTypeCountVariable"
        
  setReportOutageTypeCountVariable:
    component: "System.SetVariable"
    properties:
      variable: "askOutageTypeCountVariable"
      value: "1"
    transitions: {}
    
  copyReportOutageTypeCountVariable:
    component: "System.CopyVariables"
    properties:
      from: "askOutageTypeCountVariable"
      to: "user.askOutageTypeCountVariable"
    transitions:
      next: "resetToSelectOutageTypeAgain" 
        
  resetToSelectOutageTypeAgain:
    component: "System.ResetVariables"
    properties:
      variableList: "outageType,askOutageTypeCountVariable"
    transitions: {}
    
  directReportOutage:
    component: "System.List"
    properties:
      options: "${outageTypeEntity.type.enumValues}"
      prompt: "OK, let痴 get this reported. Is it a full outage or partial?"
      variable: "outageType"
    transitions:
      next: "checkSelectedOutageType"
      
  checkSelectedOutageType:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "outageType"
      variable: "outageTypeEntity"
    transitions:
      actions:
        match: "forMultipleOrSingle"
        nomatch: "checkReportOutageTypeCount"
        
  forMultipleOrSingle:
    component: "System.ConditionEquals"
    properties:
      variable: "isMultipleAddressOrNot"
      value: "true"
    transitions:
      actions:
        equal: "printReportOutageForMultiple"
        notequal: "printReportOutage"
        
  printReportOutageForMultiple:
    component: "ReportOutage"
    properties:
      PhoneNumber: ""
      AccountNumber: "${selectedAccountNumber}"
      OutageType: "${outageTypeEntity.value}"
    transitions:
      next: "resetAnythingElseVariable"
      
  printReportOutage:
    component: "ReportOutage"
    properties:
      PhoneNumber: "${user.phoneNumber.value}"
      AccountNumber: "${user.accountNumber.value}"
      OutageType: "${outageTypeEntity.value}"
    transitions:
      next: "resetAnythingElseVariable"
      
  resetAnythingElseVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "anythingElseVariable"
    transitions: {}
    
  anythingElse:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${outageReportProgress.value} Is there anything else that I can help\
        \ you with?"
      variable: "anythingElseVariable"
    transitions:
      next: "CheckAnythingElseVariable"
      
  CheckAnythingElseVariable:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "anythingElseVariable"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForAnythingElseVariable"
        nomatch: "intent"
        
  setVariableForAnythingElseVariable:
    component: "System.SetVariable"
    properties:
      variable: "anythingElseVariable"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkQuestionResponse"
      
  checkQuestionResponse:
    component: "System.Switch"
    properties:
      variable: "anythingElseVariable"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "resetStartBot"
        NO: "resetEnd"
          
        
        #--------------------------------------------------------Check Balance----------------------------------------------------------
        
     
  checkBalance:
    component: "System.ResetVariables"
    properties:
      variableList: "user.askOutageTypeCountVariable,user.identifierCountVariable,user.phoneNumber,user.identifier,user.noAddressFoundCount,user.addressResponseCount,user.multipleAddressCountVariable,outageOptionVariable,user.addressNotCorrectCountVariable,user.unresolvedVariable,user.selectAccountOrPhoneVariable,setStatus,identifier,phoneNumber,checkBalance_accountNumber,accountNumber,outageType,outageStatus,selectionType,outageStatusMessage,selectedAccountType,verifiedAddressResult,addressResponse,ifAddressExist,addressFound,setOutageReported,choices,accounts,setAddress,counter,outageReportProgress,anythingElseVariable,errorInMultipleAddress,reportOutageOrNot,reportOutageVariable,activeStatusResponse,numberOfAccount,accountsOptions,allResult,selectedAccountNumber,newUserAccount,selectedAccountOption,moreThanThreeAccount,maskedAddressFound,selectAccountOrPhoneVariable,unresolvedVariable,isMultipleAddressOrNot,addressNotCorrectCountVariable,checkBalance_MaskedAddress,checkBalance_AccountInfo,addressResponseCount,extraVariable,noAddressFoundCount,addressCorrectResponse,servicesDown,satisfiedRate,selectedAccountNumberType,setReportOutageReported,accountNumberCountVariable,noAddressFoundMessage,multipleAddressCountVariable,endFlag,identifierCountVariable,askOutageTypeCountVariable"
    transitions: {}
    
  setEndFlagVariableForCheckBalance:
    component: "System.SetVariable"
    properties:
      variable: "endFlag"
      value: "1"
    transitions: {}
    
  askPhoneNumber:
    component: "System.Text"
    properties:
      prompt: "What is the primary phone number associated with your account?"
      variable: "phoneNumber"
      maxPrompts: 2
    transitions:
      next: "checkPhoneNumberSetOrNotForCheckBalance"
      
  checkPhoneNumberSetOrNotForCheckBalance:
    component: "System.ConditionEquals"
    properties:
      variable: "phoneNumber"
      value: null
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "askIdentifier"
        
  checkIdentifierCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.identifierCountVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setIdentifierCountVariable"
        
  setIdentifierCountVariable:
    component: "System.SetVariable"
    properties:
      variable: "identifierCountVariable"
      value: "1"
    transitions: {}
    
  copyIdentifierVariables:
    component: "System.CopyVariables"
    properties:
      from: "identifierCountVariable"
      to: "user.identifierCountVariable"
    transitions:
      next: "resetIdentifier"
      
  resetIdentifier:
    component: "System.ResetVariables"
    properties:
      variableList: "identifier"
    transitions: {}
    
  askIdentifier:
    component: "System.Text"
    properties:
      prompt: "What are the last 4 Digits of Your Social Security Number, Business\
        \ Tax ID, or ComEd PIN?"
      variable: "identifier"
    transitions:
      next: "checkIdentifierSetOrNotForCheckBalance"
      
  checkIdentifierSetOrNotForCheckBalance:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "identifier"
      variable: "numberEntity"
    transitions:
      actions:
        match: "checkBackendServices"
        nomatch: "checkIdentifierCount"
        
  checkBackendServices:
    component: "System.ConditionEquals"
    properties:
      variable: "servicesDown"
      value: "true"
    transitions:
      actions:
        equal: "servicesAreDown"
        notequal: "checkAccountBalance"
        
  checkAccountBalance:
    component: "CheckBalance"
    properties:
      Identifier: "${identifier.value}"
      PhoneNumber: "${phoneNumber.value.completeNumber}"
    transitions:
      next: "copyCheckBalanceVariables"
      
  copyCheckBalanceVariables:
    component: "System.CopyVariables"
    properties:
      from: "identifier,phoneNumber"
      to: "user.identifier,user.phoneNumber"
    transitions: {}
    
  checkBalance_AddressFoundOrNot:
    component: "System.ConditionEquals"
    properties:
      variable: "addressFound"
      value: "true"
    transitions:
      actions:
        equal: "checkBalance_MultipleAddressFound"
        notequal: "resetNoAddressFoundVariable"
        
  checkBalance_MultipleAddressFound:
    component: "System.ConditionEquals"
    properties:
      variable: "multipleAddressFound"
      value: "true"
    transitions:
      actions:
        equal: "checkBalance_ForMultipleAddress"
        notequal: "checkBalance_AddressCorrectOrNot"
        
  checkAccountNumberCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.accountNumberCountVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setAccountNumberCountVariable"
        
  setAccountNumberCountVariable:
    component: "System.SetVariable"
    properties:
      variable: "accountNumberCountVariable"
      value: "1"
    transitions: {}
    
  copyAccountNumberVariables:
    component: "System.CopyVariables"
    properties:
      from: "accountNumberCountVariable"
      to: "user.accountNumberCountVariable"
    transitions:
      next: "resetAccountNumber"
      
  resetAccountNumber:
    component: "System.ResetVariables"
    properties:
      variableList: "checkBalance_accountNumber"
    transitions: {}
    
  checkBalance_ForMultipleAddress:
    component: "System.Text"
    properties:
      prompt: "You are associated with multiple accounts. Please enter your account\
        \ number."
      variable: "checkBalance_accountNumber"
    transitions:
      next: "checkAccountNumber"
      
  checkAccountNumber:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "checkBalance_accountNumber"
      variable: "numberEntity"
    transitions:
      actions:
        match: "checkBalance_resetAddressFoundVariable"
        nomatch: "checkAccountNumberCount"
        
  checkBalance_resetAddressFoundVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "addressFound,addressResponse"
    transitions: {}
    
  againCheckAccountBalance:
    component: "CheckBalance"
    properties:
      Identifier: "${user.identifier.value}"
      PhoneNumber: "${user.phoneNumber.value.phoneNumber}"
      AccountNumber: "${checkBalance_accountNumber.value}"
    transitions:
      next: "AddressFoundOrNotForMultipleAcc"
      
  AddressFoundOrNotForMultipleAcc:
    component: "System.ConditionEquals"
    properties:
      variable: "addressFound"
      value: "true"
    transitions:
      actions:
        equal: "checkBalance_AddressCorrectOrNot"
        notequal: "resetNoAddressFoundVariable"
        
  checkBalance_AddressCorrectOrNot:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${checkBalance_MaskedAddress}. Is this correct?"
      variable: "addressCorrectResponse"
    transitions:
      next: "checkAddressCorrectResponse"
      
  checkAddressCorrectResponse:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "addressCorrectResponse"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForAddressCorrectResponse"
        nomatch: "intent"
        
  setVariableForAddressCorrectResponse:
    component: "System.SetVariable"
    properties:
      variable: "addressCorrectResponse"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkBalance_AddressResponse"
      
  checkBalance_AddressResponse:
    component: "System.Switch"
    properties:
      variable: "addressCorrectResponse"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "checkBalance_AccountInfo"
        NO: "checkBalance_AddressResponseCount"
        
  checkBalance_AccountInfo:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "${checkBalance_AccountInfo} Is there anything else I can help you with?"
      variable: "activeStatusResponse"
    transitions:
      next: "CheckActiveStatusYesNo"
      
  checkBalance_AddressResponseCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.addressResponseCount"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "checkBalance_setAddressResponseCount"
        
  checkBalance_setAddressResponseCount:
    component: "System.SetVariable"
    properties:
      variable: "addressResponseCount"
      value: "1"
    transitions: {}
    
  copyAddressResponseCountVariables:
    component: "System.CopyVariables"
    properties:
      from: "addressResponseCount"
      to: "user.addressResponseCount"
    transitions:
      next: "checkBalance_resetVariables"
      
  checkBalance_resetVariables:
    component: "System.ResetVariables"
    properties:
      variableList: "phoneNumber,accountNumberCountVariable,user.accountNumberCountVariable,servicesDown,identifier,accountNumber,addressResponse,addressFound,addressResponseCount,noAddressFoundCount,addressCorrectResponse,identifierCountVariable,checkBalance_accountNumber,multipleAddressFound"
    transitions: {}
    
  checkBalance_AddressNotCorrect:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "I知 sorry. Do you have another phone number or 4 Digits of Your Social\
        \ Security Number, Business Tax ID, or ComEd PIN?"
      variable: "addressResponse"
    transitions:
      next: "checkAddressResponse_checkBalance"
      
  checkAddressResponse_checkBalance:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "addressResponse"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForAddressResponse_checkBalance"
        nomatch: "intent"
        
  setVariableForAddressResponse_checkBalance:
    component: "System.SetVariable"
    properties:
      variable: "addressResponse"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkAddressNotCorrectResponse"
      
  checkAddressNotCorrectResponse:
    component: "System.Switch"
    properties:
      variable: "addressResponse"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "againEnterPhoneNumber"
        NO: "resetEnd_checkBalance"
        
  resetNoAddressFoundVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "phoneNumber,servicesDown,accountNumberCountVariable,user.accountNumberCountVariableidentifier,accountNumber,addressCorrectResponse,addressResponse,addressFound,addressResponseCount,noAddressFoundCount,identifierCountVariable,identifier,checkBalance_accountNumber,multipleAddressFound"
    transitions: {}
    
  checkNoAddressFoundCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.noAddressFoundCount"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setNoAddressFoundCount"
        
  setNoAddressFoundCount:
    component: "System.SetVariable"
    properties:
      variable: "noAddressFoundCount"
      value: "1"
    transitions: {}
    
  copyNoAddressCountVariables:
    component: "System.CopyVariables"
    properties:
      from: "noAddressFoundCount"
      to: "user.noAddressFoundCount"
    transitions:
      next: "checkBalance_noAccountFound"
      
  checkNoAccountFoundYesNoCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.noAccountFoundYesNoCount"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "setNoAccountFoundYesNoCount"
        
  setNoAccountFoundYesNoCount:
    component: "System.SetVariable"
    properties:
      variable: "noAccountFoundYesNoCount"
      value: "1"
    transitions: {}
    
  copyNoAccountFoundYesNoCount:
    component: "System.CopyVariables"
    properties:
      from: "noAccountFoundYesNoCount"
      to: "user.noAccountFoundYesNoCount"
    transitions:
      next: "resetAddressResponseVariable"
      
  resetAddressResponseVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "noAccountFoundYesNoCount,addressResponse"
    transitions: {}
      
  checkBalance_noAccountFound:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "I知 sorry, but information does not match with my records. Do you have\
        \ another phone number or 4 Digits of Your Social Security Number, Business\
        \ Tax ID, or ComEd PIN?"
      variable: "addressResponse"
    transitions:
      next: "checkNoAddressFoundResponse_checkBalance"
      
  checkNoAddressFoundResponse_checkBalance:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "addressResponse"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForNoAddressFoundResponse_checkBalance"
        nomatch: "checkNoAccountFoundYesNoCount"
        
  setVariableForNoAddressFoundResponse_checkBalance:
    component: "System.SetVariable"
    properties:
      variable: "addressResponse"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkNoAddressFoundResponse"
      
  checkNoAddressFoundResponse:
    component: "System.Switch"
    properties:
      variable: "addressResponse"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "resetAllCheckBalanceVariable"
        NO: "resetEnd_checkBalance"
        
  resetAllCheckBalanceVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "phoneNumber,servicesDown,accountNumberCountVariable,user.accountNumberCountVariableidentifier,accountNumber,addressCorrectResponse,addressResponse,addressFound,addressResponseCount,noAddressFoundCount,identifierCountVariable,identifier,checkBalance_accountNumber,multipleAddressFound"
    transitions: {}    
        
  againEnterPhoneNumber:
    component: "System.Text"
    properties:
      prompt: "What is the primary phone number?"
      variable: "phoneNumber"
      maxPrompts: 2
    transitions:
      next: "checkPhoneNumber_CheckBalance"
      
  checkPhoneNumber_CheckBalance:
    component: "System.ConditionEquals"
    properties:
      variable: "phoneNumber"
      value: null
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "askIdentifier"
        
  servicesAreDown:
    component: "System.Output"
    properties:
      text: "I'm not able to complete your request right now. Please try again later."
    transitions:
      return: "servicesAreDown"
      
  end:
    component: "System.Output"
    properties:
      text: "Thank you. Please come back anytime. Have a nice day!"
    transitions:
      return: "end"
        
        
        #--------------------------------------------------------End Bot----------------------------------------------------------
        
     
  resetEnd:
    component: "System.ResetVariables"
    properties:
      variableList: "user.askOutageTypeCountVariable,user.identifierCountVariable,user.phoneNumber,user.identifier,user.noAddressFoundCount,user.addressResponseCount,user.multipleAddressCountVariable,outageOptionVariable,user.addressNotCorrectCountVariable,user.unresolvedVariable,user.selectAccountOrPhoneVariable,setStatus,identifier,phoneNumber,checkBalance_accountNumber,accountNumber,outageType,outageStatus,selectionType,outageStatusMessage,selectedAccountType,verifiedAddressResult,addressResponse,ifAddressExist,addressFound,setOutageReported,choices,accounts,setAddress,counter,outageReportProgress,anythingElseVariable,errorInMultipleAddress,reportOutageOrNot,reportOutageVariable,activeStatusResponse,numberOfAccount,accountsOptions,allResult,selectedAccountNumber,newUserAccount,selectedAccountOption,moreThanThreeAccount,maskedAddressFound,selectAccountOrPhoneVariable,unresolvedVariable,isMultipleAddressOrNot,addressNotCorrectCountVariable,checkBalance_MaskedAddress,checkBalance_AccountInfo,addressResponseCount,extraVariable,noAddressFoundCount,addressCorrectResponse,servicesDown,satisfiedRate,selectedAccountNumberType,setReportOutageReported,accountNumberCountVariable,noAddressFoundMessage,multipleAddressCountVariable,identifierCountVariable,askOutageTypeCountVariable"
    transitions: {}
    
  checkEndBotFlag:
    component: "System.ConditionEquals"
    properties:
      variable: "endFlag"
      value: "1"
    transitions:
      actions:
        equal: "rateSatisfaction"
        notequal: "end"
        
  rateSatisfaction:
    component: "System.List"
    properties:
      options: "${feedbackNumber.type.enumValues}"
      prompt: "How satisfied were you with your experience today? Please rate on a\
        \ scale from 1-5, with 5 being the most satisfied."
      variable: "satisfiedRate"
    transitions:
      next: "satisfactionEntityMatching"
      
  satisfactionEntityMatching:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "satisfiedRate"
      variable: "feedbackNumber"
    transitions:
      actions:
        match: "sendSatisfactionRate"
        nomatch: "resetSatisfiedRate"
        
  resetSatisfiedRate:
    component: "System.ResetVariables"
    properties:
      variableList: "satisfiedRate"
    transitions: {}
    
  wrongSatisfactionRate:
    component: "System.List"
    properties:
      options: "${feedbackNumber.type.enumValues}"
      prompt: "I知 sorry, but I didn稚 understand. Just to clarify, how satisfied\
        \ were you with your experience today? Please rate on a scale from 1-5, with\
        \ 5 being the most satisfied."
      variable: "satisfiedRate"
    transitions:
      next: "sendSatisfactionRate"
      
  sendSatisfactionRate:
    component: "CustomerSatisfaction"
    properties:
      SatisfactionRate: "${satisfiedRate.value}"
      PhoneNumber: "${phoneNumber.value.completeNumber}"
      AccountNumber: "${accountNumber.value}"
    transitions:
      next: "endGreetings"
      
  resetEnd_checkBalance:
    component: "System.ResetVariables"
    properties:
      variableList: "addressNotCorrectCountVariable,user.addressNotCorrectCountVariable,unresolvedVariable,user.unresolvedVariable,selectAccountOrPhoneVariable,user.selectAccountOrPhoneVariable"
    transitions: {}
    
  rateSatisfaction_checkBalance:
    component: "System.List"
    properties:
      options: "${feedbackNumber.type.enumValues}"
      prompt: "How satisfied were you with your experience today? Please rate on a\
        \ scale from 1-5, with 5 being the most satisfied."
      variable: "satisfiedRate"
    transitions:
      next: "satisfactionEntityMatching_checkBalance"
      
  satisfactionEntityMatching_checkBalance:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "satisfiedRate"
      variable: "feedbackNumber"
    transitions:
      actions:
        match: "sendSatisfactionRate_checkBalance"
        nomatch: "resetSatisfiedRate_checkBalance"
        
  resetSatisfiedRate_checkBalance:
    component: "System.ResetVariables"
    properties:
      variableList: "satisfiedRate"
    transitions: {}
    
  wrongSatisfactionRate_checkBalance:
    component: "System.List"
    properties:
      options: "${feedbackNumber.type.enumValues}"
      prompt: "I知 sorry, but I didn稚 understand. Just to clarify, how satisfied\
        \ were you with your experience today? Please rate on a scale from 1-5, with\
        \ 5 being the most satisfied."
      variable: "satisfiedRate"
    transitions:
      next: "sendSatisfactionRate_checkBalance"
      
  sendSatisfactionRate_checkBalance:
    component: "CustomerSatisfaction"
    properties:
      SatisfactionRate: "${satisfiedRate.value}"
      PhoneNumber: "${phoneNumber.value.completeNumber}"
      AccountNumber: "${checkBalance_accountNumber.value}"
    transitions:
      next: "endGreetings"
      
  endGreetings:
    component: "System.Output"
    properties:
      text: "Thank you for your feedback. Have a nice day!"
    transitions:
      return: "endGreetings"
        
        
        #--------------------------------------------------------Unresolved----------------------------------------------------------
        
     
  checkUnresolvedCount:
    component: "System.ConditionEquals"
    properties:
      variable: "user.unresolvedVariable"
      value: "1"
    transitions:
      actions:
        equal: "callCustCare"
        notequal: "resetOutageOptionVariable"
        
  resetOutageOptionVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "outageOptionVariable"
    transitions: {}
    
  unresolved:
    component: "System.List"
    properties:
      options: "${outageOptions.type.enumValues}"
      prompt: "I知 sorry, but I知 unable to assist you with this request. You can\
        \ check Outage Status, Report an Outage or Check Account Balance. Please pick\
        \ one option."
      variable: "outageOptionVariable"
      maxPrompts: 1
    transitions:
      next: "setUnresolvedVariable"
      
  setUnresolvedVariable:
    component: "System.SetVariable"
    properties:
      variable: "unresolvedVariable"
      value: "1"
    transitions: {}
    
  copyUserVariables:
    component: "System.CopyVariables"
    properties:
      from: "unresolvedVariable"
      to: "user.unresolvedVariable"
    transitions:
      next: "matchEntityForSwitchOutageOptions"
        
        
        #--------------------------------------------------------Sentimental Analysis----------------------------------------------------------
        
     
  sentimentalAnalysis:
    component: "System.Output"
    properties:
      text: "I understand your frustration and apologize for the inconvenience. Please\
        \ reach us at 1-800-EDISON-1 so we can assist you further."
    transitions:
      return: "sentimentalAnalysis"
        
        
        #--------------------------------------------------------Customer----------------------------------------------------------
        
     
  callCustCare:
    component: "System.Output"
    properties:
      text: "I知 sorry, but I am unable to assist you at this time. Please visit www.comed.com/contactus\
        \ or call us at 1-800-EDISON-1 for further support."
    transitions:
      return: "callCustCare"
        
        
        #--------------------------------------------------------Pay Balance----------------------------------------------------------
        
     
  resetPayBalanceVariable:
    component: "System.ResetVariables"
    properties:
      variableList: "user.askOutageTypeCountVariable,user.phoneNumber,user.identifier,user.noAddressFoundCount,user.addressResponseCount,user.multipleAddressCountVariable,outageOptionVariable,user.addressNotCorrectCountVariable,user.unresolvedVariable,user.selectAccountOrPhoneVariable,setStatus,identifier,phoneNumber,checkBalance_accountNumber,accountNumber,outageType,outageStatus,selectionType,outageStatusMessage,selectedAccountType,verifiedAddressResult,addressResponse,ifAddressExist,addressFound,setOutageReported,choices,accounts,setAddress,counter,outageReportProgress,anythingElseVariable,errorInMultipleAddress,reportOutageOrNot,reportOutageVariable,activeStatusResponse,numberOfAccount,accountsOptions,allResult,selectedAccountNumber,newUserAccount,selectedAccountOption,moreThanThreeAccount,maskedAddressFound,selectAccountOrPhoneVariable,unresolvedVariable,isMultipleAddressOrNot,addressNotCorrectCountVariable,checkBalance_MaskedAddress,checkBalance_AccountInfo,addressResponseCount,extraVariable,noAddressFoundCount,addressCorrectResponse,servicesDown,satisfiedRate,selectedAccountNumberType,setReportOutageReported,accountNumberCountVariable,noAddressFoundMessage,multipleAddressCountVariable,endFlag,askOutageTypeCountVariable"
    transitions: {}
    
  setEndFlagVariableForPayBalance:
    component: "System.SetVariable"
    properties:
      variable: "endFlag"
      value: "1"
    transitions: {}
    
  payBalance:
    component: "System.List"
    properties:
      options: "Yes,No"
      prompt: "To pay your bill, go to www.comed.com/paybill or call us at 1-800.EDISON-1.\
        \ Is there anything I can help you with?"
      variable: "payBalanceVariable"
    transitions:
      next: "checkPayBalanceYesNo"
      
  checkPayBalanceYesNo:
    component: "System.MatchEntity"
    properties:
      sourceVariable: "payBalanceVariable"
      variable: "YesNoVariable"
    transitions:
      actions:
        match: "setVariableForPayBalance"
        nomatch: "intent"
        
  setVariableForPayBalance:
    component: "System.SetVariable"
    properties:
      variable: "payBalanceVariable"
      value: "${YesNoVariable.value.yesno}"
    transitions:
      next: "checkPayBalanceResponse"
      
  checkPayBalanceResponse:
    component: "System.Switch"
    properties:
      variable: "payBalanceVariable"
      values:
      - "YES"
      - "NO"
    transitions:
      actions:
        YES: "resetStartBot"
        NO: "resetEnd"